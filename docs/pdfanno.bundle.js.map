{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap e63d6407cbffb8007533","webpack:///./src/pdfanno.js","webpack:///./src/page/util/anno.js","webpack:///./src/page/ui/browseButton.js","webpack:///./src/page/util/display.js","webpack:///./src/page/ui/pdfDropdown.js","webpack:///./src/page/util/dropdown.js","webpack:///./src/page/ui/primaryAnnoDropdown.js","webpack:///./src/page/ui/annoListDropdown.js","webpack:///./src/core/src/utils/position.js","webpack:///./src/page/ui/referenceAnnoDropdown.js","webpack:///./src/page/ui/annotationTools.js","webpack:///./src/page/util/window.js","webpack:///./src/index.html","webpack:///./src/pdfanno.css?319e","webpack:///./src/pdfanno.css","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js"],"names":["browseButton","pdfDropdown","primaryAnnoDropdown","annoListDropdown","referenceAnnoDropdown","annotationsTools","require","window","fileMap","adjustViewerSize","removeEventListener","addEventListener","startApplication","iframeWindow","$","get","contentWindow","event","document","createEvent","initCustomEvent","dispatchEvent","currentAnnoToolType","location","search","indexOf","setup","disableAnnotateTools","enableAnnotateTool","clearAllAnnotations","PDFAnnoCore","UI","disableRect","disableSpan","disableRelation","disableViewMode","type","enableSpan","enableRelation","enableRect","localStorage","removeItem","on","val","files","ev","target","error","isValidDirectorySelect","alert","current","getCurrentFileNames","getContents","pdfs","annos","setPDFDropdownList","setAnnoDropdownList","loadData","then","display","currentDisplay","newFileMap","console","log","Object","keys","name","pdfName","pdf","text","each","index","element","$elm","find","removeClass","primaryAnnotationName","promise1","Promise","resolve","names","referenceAnnotationNames","colors","referenceAnnotationColors","changed","filter","i","found","spectrum","promise2","length","join","all","_excludeBaseDirName","filePath","frgms","split","hasClass","annoName","push","color","toHexString","relativePath","webkitRelativePath","file","match","remove","forEach","pdfPath","snipet","append","html","fileName","snipet1","snipet2","reject","promises","p","map","fileReader","FileReader","onload","result","readAsDataURL","concat","annotation","readAsText","displayAnnotation","reloadPDFViewer","setupColorPicker","isPrimary","reload","annotations","primaryIndex","annoPath","filename","setItem","paperData","primary","getStoreAdapter","importAnnotations","iframeReady","showPaletteOnly","showPalette","hideAfterPaletteSelect","palette","slice","Math","floor","elm","off","bind","$this","e","currentTarget","currentPDFName","confirm","addClass","click","resetCheckPrimaryAnnoDropdown","resetCheckReferenceAnnoDropdown","currentAnnoName","userAnswer","deleteAllAnnotations","annotationContainer","destroy","documentId","getFileName","PDFView","url","deleteAnnotations","getAllAnnotations","a","readOnly","sort","a1","a2","_getY","elements","icon","direction","y","pageNumber","uuid","page","data","id","findById","highlight","setTimeout","dehighlight","watchPrimaryAnno","primaryAnnos","rectangles","y1","convertToExportY","paddingTop","paddingBetweenPages","meta","getPageSize","pageHeight","height","yInPage","pdfView","viewBox","pdfViewer","getPageView","viewport","size","width","toggleClass","annoNames","$button","blur","downloadAnnotation","exportData","blob","Blob","blobURL","URL","createObjectURL","createElement","body","appendChild","download","_getDownloadFileName","href","parentNode","removeChild","pdfFileName","listenWindowLeaveEvent","unlistenWindowLeaveEvent","resizeHandler","annotationUpdated","innerHeight","offset","top","css","height1","height2","height3","height4"],"mappings":"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AG,4CAA4C,uBAAuB,GAAG,uDAAuD,iBAAiB,mBAAmB,GAAG,mBAAmB,oBAAoB,GAAG,wBAAwB,sBAAsB,GAAG;;AAEt7B;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA,yCAAwC,gBAAgB;AACxD,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,aAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD;;AAEA,8BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA","file":"./dist/pdfanno.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PDFAnnoCore\"] = factory();\n\telse\n\t\troot[\"PDFAnnoCore\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e63d6407cbffb8007533\n **/","require(\"file?name=dist/index.html!./index.html\");\nrequire(\"!style!css!./pdfanno.css\");\n\nimport { enableAnnotateTool, disableAnnotateTools, clearAllAnnotations } from './page/util/anno';\n\nimport * as browseButton from './page/ui/browseButton';\nimport * as pdfDropdown from './page/ui/pdfDropdown';\nimport * as primaryAnnoDropdown from './page/ui/primaryAnnoDropdown';\nimport * as annoListDropdown from './page/ui/annoListDropdown';\nimport * as referenceAnnoDropdown from './page/ui/referenceAnnoDropdown';\nimport * as annotationsTools from './page/ui/annotationTools';\n\nimport {\n    displayAnnotation,\n    reloadPDFViewer,\n    setupColorPicker\n} from './page/util/display';\n\nimport {\n    listenWindowLeaveEvent,\n    unlistenWindowLeaveEvent,\n    resizeHandler\n} from './page/util/window';\n\n/**\n * The data which is loaded via `Browse` button.\n */\nwindow.fileMap = {};\n\n/**\n    Adjust the height of viewer according to window height.\n*/\nfunction adjustViewerSize() {\n    window.removeEventListener('resize', resizeHandler);\n    window.addEventListener('resize', resizeHandler);\n    resizeHandler();\n}\n\n/**\n * Start PDFAnno Application.\n */\nfunction startApplication() {\n\n    // Alias for convenience.\n    window.iframeWindow = $('#viewer iframe').get(0).contentWindow;\n\n    iframeWindow.addEventListener('DOMContentLoaded', () => {\n\n        // Adjust the height of viewer.\n        adjustViewerSize();\n\n        // Reset the confirm dialog at leaving page.\n        unlistenWindowLeaveEvent();\n\n        var event = document.createEvent('CustomEvent');\n        event.initCustomEvent('iframeDOMContentLoaded', true, true, null);\n        window.dispatchEvent(event);\n\n    });\n\n    iframeWindow.addEventListener('annotationrendered', () => {\n\n        // Restore the status of AnnoTools.\n        disableAnnotateTools();\n        enableAnnotateTool(window.currentAnnoToolType);\n\n        var event = document.createEvent('CustomEvent');\n        event.initCustomEvent('annotationrendered', true, true, null);\n        window.dispatchEvent(event);\n    });\n\n    // Set the confirm dialog when leaving a page.\n    iframeWindow.addEventListener('annotationUpdated', () => {\n        listenWindowLeaveEvent();\n\n        var event = document.createEvent('CustomEvent');\n        event.initCustomEvent('annotationUpdated', true, true, null);\n        window.dispatchEvent(event);\n    });\n}\n\n/**\n *  The entry point.\n */\nwindow.addEventListener('DOMContentLoaded', e => {\n\n    // Delete prev annotations.\n    if (location.search.indexOf('debug') === -1) {\n        clearAllAnnotations();\n    }\n\n    // Start application.\n    startApplication();\n\n    // Setup UI parts.\n    browseButton.setup();\n    pdfDropdown.setup();\n    primaryAnnoDropdown.setup();\n    referenceAnnoDropdown.setup();\n    annoListDropdown.setup();\n    annotationsTools.setup();\n\n    window.addEventListener('restartApp', startApplication);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/pdfanno.js\n **/","/**\n * Annotations.\n */\n\n\n\n/**\n    Disable annotation tool buttons.\n*/\nexport function disableAnnotateTools() {\n    window.iframeWindow.PDFAnnoCore.UI.disableRect();\n    window.iframeWindow.PDFAnnoCore.UI.disableSpan();\n    window.iframeWindow.PDFAnnoCore.UI.disableRelation();\n    window.iframeWindow.PDFAnnoCore.UI.disableViewMode();\n}\n\n/**\n * Enable an annotation tool.\n */\nexport function enableAnnotateTool(type) {\n\n    if (type === 'span') {\n        window.iframeWindow.PDFAnnoCore.UI.enableSpan();\n\n    } else if (type === 'one-way') {\n        window.iframeWindow.PDFAnnoCore.UI.enableRelation('one-way');\n\n    } else if (type === 'two-way') {\n        window.iframeWindow.PDFAnnoCore.UI.enableRelation('two-way');\n\n    } else if (type === 'link') {\n        window.iframeWindow.PDFAnnoCore.UI.enableRelation('link');\n\n    } else if (type === 'rect') {\n        window.iframeWindow.PDFAnnoCore.UI.enableRect();\n    }\n}\n\n\n/**\n * Clear the all annotations from the view and storage.\n */\nexport function clearAllAnnotations() {\n    localStorage.removeItem('_pdfanno_containers');\n    localStorage.removeItem('_pdfanno_primary_annoname');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/util/anno.js\n **/","/**\n * UI parts - Browse button.\n */\nimport { reloadPDFViewer, setupColorPicker, displayAnnotation } from '../util/display';\nimport { enableAnnotateTool, disableAnnotateTools, clearAllAnnotations } from '../util/anno';\n\n/**\n * Setup the behavior of a Browse Button.\n */\nexport function setup() {\n\n    // Enable to select the same directory twice.\n    $('.js-file :file').on('click', ev => {\n        $('input[type=\"file\"]').val(null);\n    });\n\n    $('.js-file :file').on('change', ev => {\n\n        const files = ev.target.files;\n\n        let error = isValidDirectorySelect(files);\n        if (error) {\n            return alert(error);\n        }\n\n        // Get current visuals.\n        const current = getCurrentFileNames();\n\n        // Get contents.\n        const { pdfs, annos } = getContents(files);\n\n        // Setup PDF Dropdown.\n        setPDFDropdownList(pdfs);\n\n        // Setup Anno Dropdown.\n        setAnnoDropdownList(annos);\n\n        // Initialize PDF Viewer.\n        clearAllAnnotations();\n\n        // Load data.\n        loadData(pdfs, annos).then(() => {\n\n            // Display a PDF and annotations.\n            display(current, fileMap);\n\n        });\n\n    });\n\n}\n\nfunction display(currentDisplay, newFileMap) {\n\n    console.log('files:', Object.keys(newFileMap));\n\n    let name;\n\n    // PDF.\n    name = currentDisplay.pdfName;\n    if (name && newFileMap[name]) {\n        window.pdf = fileMap[name];\n        window.pdfName = currentDisplay.pdfName;\n\n        $('#dropdownPdf .js-text').text(name);\n        $('#dropdownPdf a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.js-pdfname').text() === name) {\n                $elm.find('.fa-check').removeClass('no-visible');\n            }\n        });\n\n    } else {\n        delete window.pdf;\n        delete window.pdfName;\n    }\n\n    // Primary Annotation.\n    name = currentDisplay.primaryAnnotationName;\n    let promise1 = Promise.resolve();\n    if (name && newFileMap[name]) {\n\n        $('#dropdownAnnoPrimary .js-text').text(name);\n        $('#dropdownAnnoPrimary a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.js-annoname').text() === name) {\n                $elm.find('.fa-check').removeClass('no-visible');\n            }\n        });\n\n        promise1 = displayAnnotation(true, false);\n    }\n\n    // Reference Annotations.\n    let names = currentDisplay.referenceAnnotationNames;\n    let colors = currentDisplay.referenceAnnotationColors;\n    let changed = false;\n    names = names.filter((name, i) => {\n        let found = false;\n        if (newFileMap[name]) {\n            $('#dropdownAnnoReference a').each((index, element) => {\n                let $elm = $(element);\n                if ($elm.find('.js-annoname').text() === name) {\n                    $elm.find('.fa-check').removeClass('no-visible');\n                    $elm.find('.js-anno-palette').spectrum('set', colors[i]);\n\n                    console.log('color: ', colors[i]);\n\n                    found = true;\n                }\n            });\n        }\n        return found;\n    });\n    let promise2 = Promise.resolve();\n    if (names.length > 0) {\n        $('#dropdownAnnoReference .js-text').text(names.join(','));\n        promise2 = displayAnnotation(false, false);\n    }\n\n    // Reload page.\n    Promise.all([promise1, promise2]).then(reloadPDFViewer);\n\n}\n\n/**\n * Get a filename from a path.\n */\nfunction _excludeBaseDirName(filePath) {\n    let frgms = filePath.split('/');\n    return frgms[frgms.length - 1];\n}\n\n/**\n * Get the file names which currently are displayed.\n */\nfunction getCurrentFileNames() {\n\n    let text;\n\n    // a PDF name.\n    text = $('#dropdownPdf .js-text').text();\n    let pdfName = (text !== 'PDF File' ? text : null);\n\n    // a Primary anno.\n    text = $('#dropdownAnnoPrimary .js-text').text();\n    let primaryAnnotationName = (text !== 'Anno File' ? text : null);\n\n\n    let referenceAnnotationNames = [];\n    let referenceAnnotationColors = [];\n    $('#dropdownAnnoReference a').each((index, element) => {\n        let $elm = $(element);\n        if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n            let annoName = $elm.find('.js-annoname').text(); // TODO こういうのはJS変数として持っておいたほうがいいかも（選択済のものについて）\n            referenceAnnotationNames.push(annoName);\n            let color = $elm.find('.js-anno-palette').spectrum('get').toHexString();\n            referenceAnnotationColors.push(color);\n        }\n    });\n\n    return {\n        pdfName,\n        primaryAnnotationName,\n        referenceAnnotationNames,\n        referenceAnnotationColors\n    };\n}\n\n/**\n * Check whether the directory the user specified is valid.\n */\nfunction isValidDirectorySelect(files) {\n\n    // Error, if no contents exits.\n    if (!files || files.length === 0) {\n        return 'Not files specified';\n    }\n\n    // Error, if the user select a file - not a directory.\n    let relativePath = files[0].webkitRelativePath;\n    if (!relativePath) {\n        return 'Please select a directory, NOT a file';\n    }\n\n    // OK.\n    return null;\n}\n\n/**\n * Extract PDFs and annotations from files the user specified.\n */\nfunction getContents(files) {\n    let pdfs = [];\n    let annos = [];\n\n    for (let i = 0; i < files.length; i++) {\n\n        let file = files[i];\n        let relativePath = file.webkitRelativePath;\n\n        let frgms = relativePath.split('/');\n        if (frgms.length > 2) {\n            console.log('SKIP:', relativePath);\n            continue;\n        }\n        console.log('relativePath:', relativePath);\n\n        // Get files only PDFs or Anno files.\n        if (relativePath.match(/\\.pdf$/i)) {\n            pdfs.push(file);\n        } else if (relativePath.match(/\\.anno$/i)) {\n            annos.push(file);\n        }\n    }\n\n    return {\n        pdfs,\n        annos\n    };\n}\n\n/**\n * Setup the contents of the dropdown for PDFs.\n */\nfunction setPDFDropdownList(pdfs) {\n\n    $('#dropdownPdf .js-text').text('PDF File');\n    $('#dropdownPdf li').remove();\n    pdfs.forEach(file => {\n        let pdfPath = _excludeBaseDirName(file.webkitRelativePath);\n        let snipet = `\n            <li>\n                <a href=\"#\">\n                    <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>&nbsp;\n                    <span class=\"js-pdfname\">${pdfPath}</span>\n                </a>\n            </li>\n        `;\n        $('#dropdownPdf ul').append(snipet);\n    });\n}\n\n/**\n * Setup the contents of the dropdowns for primary/reference annotations.\n */\nfunction setAnnoDropdownList(annos) {\n\n    // Reset.\n    $('#dropdownAnnoPrimary ul').html('');\n    $('#dropdownAnnoReference ul').html('');\n    $('#dropdownAnnoPrimary .js-text').text('Anno File');\n    $('#dropdownAnnoReference .js-text').text('Reference Files');\n\n    // Setup anno / reference dropdown.\n    annos.forEach(file => {\n\n        let fileName = _excludeBaseDirName(file.webkitRelativePath);\n\n        let snipet1 = `\n            <li>\n                <a href=\"#\">\n                    <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>\n                    <span class=\"js-annoname\">${fileName}</span>\n                </a>\n            </li>\n        `;\n        $('#dropdownAnnoPrimary ul').append(snipet1);\n\n        let snipet2 = `\n            <li>\n                <a href=\"#\">\n                    <i class=\"fa fa-check no-visible\" aria-hidden=\"true\"></i>\n                    <input type=\"text\" name=\"color\" class=\"js-anno-palette\" autocomplete=\"off\">\n                    <span class=\"js-annoname\">${fileName}</span>\n                </a>\n            </li>\n        `;\n        $('#dropdownAnnoReference ul').append(snipet2);\n    });\n\n    // Setup color pallets.\n    setupColorPicker();\n}\n\n/**\n * Load PDFs and Annotations from the directory the user specified.\n */\nfunction loadData(pdfs, annos) {\n\n    window.fileMap = {};\n\n    return new Promise((resolve, reject) => {\n\n        let promises = [];\n\n        // Load pdfs.\n        let p = pdfs.map(file => {\n            return new Promise((resolve, reject) => {\n                let fileReader = new FileReader();\n                fileReader.onload = event => {\n                    let pdf = event.target.result;\n                    let fileName = _excludeBaseDirName(file.webkitRelativePath);\n                    fileMap[fileName] = pdf;\n                    resolve();\n                }\n                fileReader.readAsDataURL(file);\n            });\n        });\n        promises = promises.concat(p);\n\n        // Load annos.\n        p = annos.map(file => {\n            return new Promise((resolve, reject) => {\n                let fileReader = new FileReader();\n                fileReader.onload = event => {\n                    let annotation = event.target.result;\n                    let fileName = _excludeBaseDirName(file.webkitRelativePath);\n                    fileMap[fileName] = annotation;\n                    resolve();\n                }\n                fileReader.readAsText(file);\n            });\n        });\n        promises = promises.concat(p);\n\n        // Wait for complete.\n        Promise.all(promises).then(resolve);\n\n    });\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/browseButton.js\n **/","\n\n/**\n * Display annotations an user selected.\n */\nexport function displayAnnotation(isPrimary, reload=true) {\n\n    let annotations = [];\n    let colors = [];\n    let primaryIndex = -1;\n\n    // Primary annotation.\n    if (isPrimary) {\n        $('#dropdownAnnoPrimary a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n                let annoPath = $elm.find('.js-annoname').text();\n                if (!fileMap[annoPath]) {\n                    console.log('ERROR');\n                    return;\n                }\n                primaryIndex = 0;\n                annotations.push(fileMap[annoPath]);\n                let color = null; // Use the default color used for edit.\n                colors.push(color);\n\n                let filename = annoPath.split('/')[annoPath.split('/').length - 1];\n                localStorage.setItem('_pdfanno_primary_annoname', filename);\n                console.log('filename:', filename);\n            }\n        });\n    }\n\n    // Reference annotations.\n    if (!isPrimary) {\n        $('#dropdownAnnoReference a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n                let annoPath = $elm.find('.js-annoname').text();\n                if (!fileMap[annoPath]) {\n                    console.log('ERROR');\n                    return;\n                }\n                annotations.push(fileMap[annoPath]);\n                let color = $elm.find('.js-anno-palette').spectrum('get').toHexString();\n                console.log(color);\n                colors.push(color);\n            }\n        });\n    }\n\n    console.log('colors:', colors);\n\n    // Create import data.\n    let paperData = {\n        primary : primaryIndex,\n        colors,\n        annotations\n    };\n\n    // Pass the data to pdf-annotatejs.\n    window.iframeWindow.PDFAnnoCore.getStoreAdapter().importAnnotations(paperData, isPrimary).then(result => {\n\n        if (reload) {\n            // Reload the viewer.\n            reloadPDFViewer();\n        }\n\n        return true;\n    });\n\n}\n\n/**\n * Reload PDF Viewer.\n */\nexport function reloadPDFViewer() {\n\n    // Reload pdf.js.\n    $('#viewer iframe').remove();\n    $('#viewer').html('<iframe src=\"./pages/viewer.html\" class=\"anno-viewer\" frameborder=\"0\"></iframe>');\n\n    // Restart.\n    var event = document.createEvent('CustomEvent');\n    event.initCustomEvent('restartApp', true, true, null);\n    window.dispatchEvent(event);\n\n    // Catch the event iframe is ready.\n    function iframeReady() {\n        console.log('iframeReady');\n        window.removeEventListener('annotationrendered', iframeReady);\n    }\n    window.addEventListener('annotationrendered', iframeReady);\n}\n\n/**\n * Setup the color pickers.\n */\nexport function setupColorPicker() {\n\n    const colors = [\n        'rgb(255, 128, 0)', 'hsv 100 70 50', 'yellow', 'blanchedalmond',\n        'red', 'green', 'blue', 'violet'\n    ];\n\n    // Setup colorPickers.\n    $('.js-anno-palette').spectrum({\n        showPaletteOnly        : true,\n        showPalette            : true,\n        hideAfterPaletteSelect : true,\n        palette                : [\n            colors.slice(0, Math.floor(colors.length/2)),\n            colors.slice(Math.floor(colors.length/2), colors.length)\n        ]\n    });\n    // Set initial color.\n    $('.js-anno-palette').each((i, elm) => {\n        $(elm).spectrum('set', colors[ i % colors.length ]);\n    });\n\n    // Setup behavior.\n    $('.js-anno-palette').off('change').on('change', displayAnnotation.bind(null, false));\n}\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/util/display.js\n **/","/**\n * UI parts - PDF Dropdown.\n */\nimport { reloadPDFViewer } from '../util/display';\nimport { clearAllAnnotations } from '../util/anno';\nimport { resetCheckPrimaryAnnoDropdown, resetCheckReferenceAnnoDropdown } from '../util/dropdown';\n\n/**\n * Setup the dropdown of PDFs.\n */\nexport function setup() {\n\n    $('#dropdownPdf').on('click', 'a', e => {\n\n        let $this = $(e.currentTarget);\n        let pdfPath = $this.find('.js-pdfname').text();\n\n        let currentPDFName = $('#dropdownPdf .js-text').text();\n        if (currentPDFName === pdfPath) {\n            console.log('Not reload. the pdf are same.');\n            return;\n        }\n\n        // Confirm to override.\n        if (currentPDFName !== 'PDF File') {\n            if (!window.confirm('Are you sure to load another PDF ?')) {\n                return;\n            }\n        }\n\n        $('#dropdownPdf .js-text').text(pdfPath);\n\n        $('#dropdownPdf .fa-check').addClass('no-visible');\n        $this.find('.fa-check').removeClass('no-visible');\n\n        if (!fileMap[pdfPath]) {\n            return false;\n        }\n\n        // Reset Primary/Reference anno dropdowns, and data.\n        clearAllAnnotations();\n        resetCheckPrimaryAnnoDropdown();\n        resetCheckReferenceAnnoDropdown();\n\n        // reload.\n        window.pdf = fileMap[pdfPath];\n        let fileName = pdfPath.split('/')[pdfPath.split('/').length - 1];\n        window.pdfName = fileName;\n        reloadPDFViewer();\n\n        // Close dropdown.\n        $('#dropdownPdf').click();\n\n        return false;\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/pdfDropdown.js\n **/","/**\n * Utility functions for dropdown UIs.\n */\n\nexport function resetCheckPrimaryAnnoDropdown() {\n    $('#dropdownAnnoPrimary .js-text').text('Anno File');\n    $('#dropdownAnnoPrimary .fa-check').addClass('no-visible');\n}\n\nexport function resetCheckReferenceAnnoDropdown() {\n    $('#dropdownAnnoReference .js-text').text('Reference Files');\n    $('#dropdownAnnoReference .fa-check').addClass('no-visible');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/util/dropdown.js\n **/","/**\n * UI parts - Primary Annotation Dropdown.\n */\nimport { reloadPDFViewer, displayAnnotation } from '../util/display';\n\n/**\n * Setup a click action of the Primary Annotation Dropdown.\n */\nexport function setup() {\n\n    $('#dropdownAnnoPrimary').on('click', 'a', e => {\n\n        let $this = $(e.currentTarget);\n        let annoName = $this.find('.js-annoname').text();\n\n        let currentAnnoName = $('#dropdownAnnoPrimary .js-text').text();\n        if (currentAnnoName === annoName) {\n\n            let userAnswer = window.confirm('Are you sure to clear the current annotations?');\n            if (!userAnswer) {\n                return;\n            }\n\n            $('#dropdownAnnoPrimary .fa-check').addClass('no-visible');\n            $('#dropdownAnnoPrimary .js-text').text('Anno File');\n\n            deleteAllAnnotations();\n\n            // Close\n            $('#dropdownAnnoPrimary').click();\n\n            return false;\n\n        }\n\n        // Confirm to override.\n        if (currentAnnoName !== 'Anno File') {\n            if (!window.confirm('Are you sure to load another Primary Annotation ?')) {\n                return;\n            }\n        }\n\n        $('#dropdownAnnoPrimary .js-text').text(annoName);\n\n        $('#dropdownAnnoPrimary .fa-check').addClass('no-visible');\n        $this.find('.fa-check').removeClass('no-visible');\n\n        // reload.\n        displayAnnotation(true);\n\n        // Close\n        $('#dropdownAnnoPrimary').click();\n\n        return false;\n    });\n}\n\n\n\n/**\n * Delete all annotations.\n */\nfunction deleteAllAnnotations() {\n\n    // Comfirm to user.\n    // let userAnswer = window.confirm('Are you sure to clear the current annotations?');\n    // if (!userAnswer) {\n    //     return;\n    // }\n\n    iframeWindow.annotationContainer.destroy();\n\n    let documentId = window.iframeWindow.getFileName(window.iframeWindow.PDFView.url);\n    window.iframeWindow.PDFAnnoCore.getStoreAdapter().deleteAnnotations(documentId).then(() => {\n        reloadPDFViewer();\n    });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/primaryAnnoDropdown.js\n **/","/**\n * UI parts - Anno List Dropdown.\n */\nimport { convertToExportY } from '../../core/src/utils/position';\n\n/**\n * Setup the dropdown for Anno list.\n */\nexport function setup() {\n\n    // Show the list of primary annotations.\n    $('#dropdownAnnoList').on('click', () => {\n\n        // Get displayed annotations.\n        let annotations = iframeWindow.annotationContainer.getAllAnnotations();\n\n        // Filter only Primary.\n        annotations = annotations.filter(a => {\n            return !a.readOnly;\n        });\n\n        // Sort by offsetY.\n        annotations = annotations.sort((a1, a2) => {\n            return _getY(a1) - _getY(a2);\n        });\n\n        // Create elements.\n        let elements = annotations.map(a => {\n\n            let icon;\n            if (a.type === 'span') {\n                icon = '<i class=\"fa fa-pencil\"></i>';\n            } else if (a.type === 'relation' && a.direction === 'one-way') {\n                icon = '<i class=\"fa fa-long-arrow-right\"></i>';\n            } else if (a.type === 'relation' && a.direction === 'two-way') {\n                icon = '<i class=\"fa fa-arrows-h\"></i>';\n            } else if (a.type === 'relation' && a.direction === 'link') {\n                icon = '<i class=\"fa fa-minus\"></i>';\n            } else if (a.type === 'area') {\n                icon = '<i class=\"fa fa-square-o\"></i>';\n            }\n\n            let y = _getY(a);\n            let { pageNumber } = convertToExportY(y);\n\n\n            let snipet = `\n                <li>\n                    <a href=\"#\" data-page=\"${pageNumber}\" data-id=\"${a.uuid}\">\n                        ${icon}&nbsp;&nbsp;\n                        <span>${a.text || ''}</span>\n                    </a>\n                </li>\n            `;\n\n            return snipet;\n        });\n\n        $('#dropdownAnnoList ul').html(elements);\n\n    });\n\n    // Jump to the page that the selected annotation is at.\n    $('#dropdownAnnoList').on('click', 'a', e => {\n\n        // Jump to the page anno rendered at.\n        let page = $(e.currentTarget).data('page');\n        console.log('page:', page);\n        iframeWindow.PDFView.page = page;\n\n        // Highlight.\n        let id = $(e.currentTarget).data('id');\n        let annotation = iframeWindow.annotationContainer.findById(id);\n        if (annotation) {\n            annotation.highlight();\n            setTimeout(() => {\n                annotation.dehighlight();\n            }, 1000);\n        }\n\n        // Close the dropdown.\n        $('#dropdownAnnoList').click();\n    });\n\n    // Watch the number of primary annos.\n    function watchPrimaryAnno(e) {\n        const primaryAnnos = iframeWindow.annotationContainer.getAllAnnotations().filter(a => {\n            return !a.readOnly;\n        });\n        $('#dropdownAnnoList .js-count').text(primaryAnnos.length);\n    }\n    $(window)\n        .off('annotationrendered annotationUpdated', watchPrimaryAnno)\n        .on('annotationrendered annotationUpdated', watchPrimaryAnno);\n\n}\n\n/**\n * Get the y position in the annotation.\n */\nfunction _getY(annotation) {\n\n    if (annotation.rectangles) {\n        return annotation.rectangles[0].y;\n\n    } else if (annotation.y1) {\n        return annotation.y1;\n\n    } else {\n        return annotation.y;\n    }\n}\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/annoListDropdown.js\n **/","/**\n * The padding of page top.\n */\nconst paddingTop = 9;\n\n/**\n * The padding between pages.\n */\nconst paddingBetweenPages = 9;\n\n/**\n * Convert the `y` position from the local coords to exported json.\n */\nexport function convertToExportY(y) {\n\n    let meta = getPageSize();\n\n    y -= paddingTop;\n\n    let pageHeight = meta.height + paddingBetweenPages;\n\n    let pageNumber = Math.floor(y / pageHeight) + 1;\n    let yInPage = y - (pageNumber-1) * pageHeight;\n\n    return { pageNumber, y : yInPage };\n}\n\n/**\n * Get a page size of a single PDF page.\n */\nfunction getPageSize() {\n\n    let pdfView = window.PDFView || iframeWindow.PDFView;\n\n    let viewBox = pdfView.pdfViewer.getPageView(0).viewport.viewBox;\n    let size = { width : viewBox[2], height : viewBox[3] };\n    return size;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/src/utils/position.js\n **/","/**\n * UI parts - Reference Annotation Dropdown.\n */\nimport { displayAnnotation } from '../util/display';\n\n/**\n * Setup a click action of the Reference Annotation Dropdown.\n */\nexport function setup() {\n\n    $('#dropdownAnnoReference').on('click', 'a', e => {\n\n        let $this = $(e.currentTarget);\n\n        $this.find('.fa-check').toggleClass('no-visible');\n\n        let annoNames = [];\n        $('#dropdownAnnoReference a').each((index, element) => {\n            let $elm = $(element);\n            if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n                annoNames.push($elm.find('.js-annoname').text());\n            }\n        });\n        if (annoNames.length > 0) {\n            $('#dropdownAnnoReference .js-text').text(annoNames.join(','));\n        } else {\n            $('#dropdownAnnoReference .js-text').text('Reference Files');\n        }\n\n        displayAnnotation(false);\n\n        return false;\n\n    });\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/referenceAnnoDropdown.js\n **/","/**\n * UI parts - Annotations Tools.\n */\nimport { reloadPDFViewer } from '../util/display';\nimport { unlistenWindowLeaveEvent } from '../util/window';\nimport { enableAnnotateTool, disableAnnotateTools } from '../util/anno';\n\n\n/**\n    Set the behavior of the tool buttons for annotations.\n*/\nexport function setup() {\n\n    window.currentAnnoToolType = 'view';\n\n    $('.js-tool-btn').off('click').on('click', (e) => {\n\n        disableAnnotateTools();\n\n        let $button = $(e.currentTarget);\n\n        if ($button.hasClass('active')) {\n            $button\n                .removeClass('active')\n                .blur();\n            return false;\n        }\n\n        $('.js-tool-btn.active').removeClass('active');\n        $button.addClass('active');\n\n        let type = $button.data('type');\n\n        window.currentAnnoToolType = type;\n\n        enableAnnotateTool(type);\n\n        return false;\n    });\n\n    $('.js-tool-btn2').off('click').on('click', (e) => {\n\n        let $button = $(e.currentTarget);\n        let type = $button.data('type');\n\n        $button.blur();\n\n        if (type === 'download') {\n            downloadAnnotation();\n        }\n\n        return false;\n    });\n\n}\n\n/**\n * Export the primary annotation data for download.\n */\nfunction downloadAnnotation() {\n\n    window.iframeWindow.PDFAnnoCore.getStoreAdapter().exportData().then(annotations => {\n        let blob = new Blob([annotations]);\n        let blobURL = window.URL.createObjectURL(blob);\n        let a = document.createElement('a');\n        document.body.appendChild(a); // for firefox working correctly.\n        a.download = _getDownloadFileName();\n        a.href = blobURL;\n        a.click();\n        a.parentNode.removeChild(a);\n    });\n\n    unlistenWindowLeaveEvent();\n}\n\n/**\n * Get the anno file name for download.\n */\nfunction _getDownloadFileName() {\n\n    // The name of Primary Annotation.\n    let primaryAnnotationName;\n    $('#dropdownAnnoPrimary a').each((index, element) => {\n        let $elm = $(element);\n        if ($elm.find('.fa-check').hasClass('no-visible') === false) {\n            primaryAnnotationName = $elm.find('.js-annoname').text();\n        }\n    });\n    if (primaryAnnotationName) {\n        return primaryAnnotationName;\n    }\n\n    // The name of PDF.\n    let pdfFileName = iframeWindow.getFileName(iframeWindow.PDFView.url);\n    return pdfFileName.split('.')[0] + '.anno';\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/ui/annotationTools.js\n **/","/**\n * Utility for window.\n */\n\n/**\n * Set the confirm dialog at leaving the page.\n */\nexport function listenWindowLeaveEvent() {\n    window.annotationUpdated = true;\n    $(window).off('beforeunload').on('beforeunload', () => {\n        return 'You don\\'t save the annotations yet.\\nAre you sure to leave ?';\n    });\n}\n\n/**\n * Unset the confirm dialog at leaving the page.\n */\nexport function unlistenWindowLeaveEvent() {\n    window.annotationUpdated = false;\n    $(window).off('beforeunload');\n}\n\n/**\n * Resize the height of elements adjusting to the window.\n */\nexport function resizeHandler() {\n\n    // PDFViewer.\n    let height = $(window).innerHeight() - $('#viewer').offset().top;\n    $('#viewer iframe').css('height', `${height}px`);\n\n    // Dropdown for PDF.\n    let height1 = $(window).innerHeight() - ($('#dropdownPdf ul').offset().top || 120);\n    $('#dropdownPdf ul').css('max-height', `${height1 - 20}px`);\n\n    // Dropdown for Primary Annos.\n    let height2 = $(window).innerHeight() - ($('#dropdownAnnoPrimary ul').offset().top || 120);\n    $('#dropdownAnnoPrimary ul').css('max-height', `${height2 - 20}px`);\n\n    // Dropdown for Anno list.\n    let height3 = $(window).innerHeight() - ($('#dropdownAnnoList ul').offset().top || 120);\n    $('#dropdownAnnoList ul').css('max-height', `${height3 - 20}px`);\n\n    // Dropdown for Reference Annos.\n    let height4 = $(window).innerHeight() - ($('#dropdownAnnoReference ul').offset().top || 120);\n    $('#dropdownAnnoReference ul').css('max-height', `${height4 - 20}px`);\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/page/util/window.js\n **/","module.exports = __webpack_public_path__ + \"dist/index.html\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/file-loader?name=dist/index.html!./src/index.html\n ** module id = 12\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./pdfanno.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader!./~/css-loader!./src/pdfanno.css\n ** module id = 13\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"@charset 'utf-8';\\n\\n.no-visible {\\n    visibility: hidden;\\n}\\n\\n/**\\n * Viewer size.\\n * This height will be override to fit the browser height (by app.js).\\n */\\n.anno-viewer {\\n    width: 100%;\\n    height: 500px;\\n}\\n\\n/**\\n * Annotation Select UI Layout.\\n */\\n.anno-select-layout {}\\n.anno-select-layout .row:first-child {\\n    margin-bottom: 10px;\\n}\\n.anno-select-layout [type=\\\"radio\\\"] {\\n    margin-right: 5px;\\n}\\n.anno-select-layout [type=\\\"file\\\"] {\\n    display: inline-block;\\n    margin-left: 5px;\\n    line-height: 1em;\\n}\\n.anno-select-layout .sp-replacer {\\n    padding: 0;\\n    border: none;\\n}\\n.anno-select-layout .sp-dd {\\n    display: none;\\n}\\n\\n/**\\n * Dropdown.\\n */\\n.dropdown-menu {\\n    overflow: scroll;\\n}\\n\\n/**\\n * Color picker.\\n */\\n.anno-ui .sp-replacer {\\n    padding: 0;\\n    border: none;\\n}\\n.anno-ui .sp-dd {\\n    display: none;\\n}\\n.anno-ui .sp-preview {\\n    margin-right: 0;\\n}\\n\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./src/pdfanno.css\n ** module id = 14\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 15\n ** module chunks = 0 1\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 16\n ** module chunks = 0 1\n **/"],"sourceRoot":""}